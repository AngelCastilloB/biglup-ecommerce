<modal-message (onClose)="_onModalClosed($event)"></modal-message>

<h3>
  <i class="fa fa-tag"></i>
  <small> {{ 'Add Product' | translate }}</small>
</h3>
<hr>
<br>
<div class="add-product-grid">
  <md-grid-list cols="1" *ngIf="_product.title[0]">
    <md-card>
      <md-tab-group>
        <md-tab *ngFor="let lang of _i18nService.getSupportedLanguages()">
          <md-card-content>
            <template md-tab-label>{{lang}}</template>
            <template md-tab-content>
              <br>
              <i18n-input [(model)]="_i18nTitleReferenceMap[lang]" [placeholder]="_getTitleTranslation()"></i18n-input>
              <br>
              <br>
              {{ 'Description' | translate }}
              <i18n-text-editor [(model)]="_i18nDescReferenceMap[lang]"></i18n-text-editor>
            </template>
          </md-card-content>
        </md-tab>
      </md-tab-group>
    </md-card>
    <br>
    <md-card>
      <product-image-manager #imagesManager [(model)]="_product.images"></product-image-manager>
    </md-card>

    <br>
    <md-card>
      <b>{{ 'Pricing' | translate }}</b><br/><br/>
      <md-input placeholder="Price" align="end" [(ngModel)]="_product.price">
        <span md-prefix></span>
        <span md-suffix>&nbsp;$</span>
      </md-input>
      <br>
      <md-input placeholder="Discount" align="end" [(ngModel)]="_product.discount">
        <span md-prefix></span>
        <span md-suffix>&nbsp;%</span>
      </md-input>
    </md-card>

    <br>
    <md-card>
      <b>{{ 'Categories' | translate }}</b><br/><br/>
      <md-checkbox *ngFor="let category of _categoriesService.getCategories() | async"
                   [checked]="_productHasCategory(category._id)"
                   (change)="_onCategoryToggle(category._id, $event.checked)">
        {{category.name | mongoTranslate}}
      </md-checkbox>
    </md-card>
    <br>
    <md-card>
      <b>{{ 'Inventory' | translate }}</b><br/><br/>
      <div class="row">
        <div class="col-md-6">
          {{ 'SKU (Stock Keeping Unit)' | translate }}
          <input type="text" [(ngModel)]="_product.sku" name="sku" id="sku" class="form-control">
        </div>
        <div class="col-md-6">
          {{ 'Barcode (ISBN, UPC, GTIN, etc.)' | translate }}
          <input type="text" id="barcode" [(ngModel)]="_product.barcode" name="barcode" id="barcode" class="form-control">
        </div>
      </div>

      {{ 'Inventory Policy' | translate }}
      <br/>
      <div class="row">
        <div class="col-md-6 checkbox-container">
          <input type="checkbox" [checked]="_product.trackInventory" [(ngModel)]="_product.trackInventory" name="track-inventory" id="track-inventory" class="checkbox"/>
          <label for="track-inventory" class="checkbox-text">{{ 'Track Inventory' | translate }}</label>
        </div>
        <div *ngIf="_product.trackInventory" class="col-md-6">
          {{ 'Quantity' | translate }}
          <input type="number" id="quantity" [(ngModel)]="_product.stock" name="quantity" class="form-control">
        </div>
      </div>
      <div *ngIf="_product.trackInventory" class="row">
        <div class="col-md-12 checkbox-container">
          <input type="checkbox" [checked]="_product.isBackorder" [(ngModel)]="_product.isBackorder" name="allow-backorder" id="allow-backorder" class="checkbox"/>
          <label for="allow-backorder" class="checkbox-text">{{ "Allow customers to purchase this product when it's out of stock" | translate }}</label>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12 checkbox-container">
          <input type="checkbox" [checked]="_product.requiresShipping" [(ngModel)]="_product.requiresShipping"  name="requires-shipping" id="requires-shipping" class="checkbox"/>
          <label for="requires-shipping" class="checkbox-text">{{ "This product requires shipping" | translate }}</label>
        </div>
      </div>
    </md-card>
    <br>
    <md-card>
      <b>{{ 'Visibility' | translate }}</b><br/><br/>
      <div class="row">
        <div class="col-md-12 checkbox-container">
          <input type="checkbox" [checked]="_product.isVisible" [(ngModel)]="_product.isVisible"  name="is-visible" id="is-visible" class="checkbox"/>
          <label for="is-visible" class="checkbox-text">{{ "Show this product in the store" | translate }}</label>
        </div>
      </div>
    </md-card>
  </md-grid-list>
</div>
<br>
<button class="add-product-left-buttons add-product-buttons"
        md-raised-button
        *ngIf="_isEditMode"
        (click)="_deleteProduct()"
        color="warn">{{'Delete' | translate }}
</button>

<button class="add-product-right-buttons add-product-buttons"
        md-raised-button
        *ngIf="!_isEditMode"
        (click)="_saveProduct()"
        color="primary">{{'Create' | translate }}
</button>

<button class="add-product-right-buttons add-product-buttons"
        md-raised-button
        *ngIf="_isEditMode"
        (click)="_updateProduct()"
        color="primary">{{'Update' | translate }}
</button>

<button class="add-product-right-buttons add-product-buttons"
        md-raised-button
        (click)="_onCancel()">{{'Cancel' | translate }}
</button>
<br><br>
